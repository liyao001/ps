<!DOCTYPE html><html><head><meta charset="utf-8"><title>Case Study: Resolving the Mystery of a Full Linux Root Disk | Li Yao</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#3F51B5"><meta name="keywords" content="technical_docs,debug"><meta name="description" content="In the world of genomics research, every data point carries the potential to unlock the secrets of  life itself. However, as genomics datasets grow in size and complexity, so do the challenges of mana"><meta property="og:type" content="article"><meta property="og:title" content="Case Study: Resolving the Mystery of a Full Linux Root Disk"><meta property="og:url" content="https://www.yaobio.com/posts/case-study-resolving-the-mystery-of-a-full-linux-root-disk/index.html"><meta property="og:site_name" content="Li Yao"><meta property="og:description" content="In the world of genomics research, every data point carries the potential to unlock the secrets of  life itself. However, as genomics datasets grow in size and complexity, so do the challenges of mana"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://www.yaobio.com/posts/case-study-resolving-the-mystery-of-a-full-linux-root-disk/disk-space-low.png"><meta property="article:published_time" content="2021-09-04T00:47:40.000Z"><meta property="article:modified_time" content="2025-04-23T04:03:22.946Z"><meta property="article:author" content="Li Yao"><meta property="article:tag" content="technical_docs"><meta property="article:tag" content="debug"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.yaobio.com/posts/case-study-resolving-the-mystery-of-a-full-linux-root-disk/disk-space-low.png"><link rel="alternate" type="application/atom+xml" title="Li Yao" href="/atom.xml"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css?v=2.0.0"><link rel="stylesheet" href="/css/li.css?v=2.0.0"><script>window.lazyScripts=[]</script><script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-KGJ9HPC",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><meta name="generator" content="Hexo 6.2.0"></head><body><script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-KGJ9HPC",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><div id="loading" class="active"></div><aside id="menu" class="hide"><div class="inner flex-row-vertical"><a href="javascript:;" rel="external nofollow noreferrer" class="header-icon waves-effect waves-circle waves-light" id="menu-off"><i class="fa-solid fa-lg fa-xmark"></i></a><div class="brand-wrap" style="background-image:url(/img/brand.jpg)"><div class="brand"> <a href="/" class="avatar waves-effect waves-circle waves-light"><img src="/img/profile.png"></a><hgroup class="introduce"><h5 class="nickname"> Li Yao</h5></hgroup></div></div><div class="scroll-wrap flex-col"><ul class="nav"><li class="waves-block waves-effect"><a href="/"><i class="icon fa-solid fa-lg fa-house-chimney"></i> Home</a></li><li class="waves-block waves-effect"><a href="/publications"><i class="icon fa-solid fa-lg fa-book"></i> Publications</a></li><li class="waves-block waves-effect"><a href="/tools"><i class="icon fa-solid fa-lg fa-rocket"></i> Tools</a></li><li class="waves-block waves-effect"><a href="/teaching"><i class="icon fa-solid fa-lg fa-person-chalkboard"></i> Teaching</a></li></ul></div></div></aside><main id="main"><div class="uni-header"><header class="top-header" id="header"><div class="flex-row"><a href="javascript:;" rel="external nofollow noreferrer" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="fa-solid fa-lg fa-bars"></i></a><div class="flex-col header-title ellipsis">Case Study: Resolving the Mystery of a Full Linux Root Disk</div><div class="search-wrap" id="search-wrap"><a href="javascript:;" rel="external nofollow noreferrer" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="fa-solid fa-lg fa-chevron-left"></i></a> <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search"><a href="javascript:;" rel="external nofollow noreferrer" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="fa-solid fa-lg fa-magnifying-glass"></i></a></div></div></header><header class="content-header post-header"><div class="container fade-scale"><h1 class="title">Case Study: Resolving the Mystery of a Full Linux Root Disk</h1><h5 class="subtitle"> <time datetime="2021-09-04T00:47:40.000Z" itemprop="datePublished" class="page-time">2021-09-04</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/posts/">posts</a></li></ul></h5></div></header></div><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap post-toc-shrink" id="post-toc"><h4>Table of Content</h4><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#The-Enigmatic-Message"><span class="post-toc-number">1.</span> <span class="post-toc-text">The Enigmatic Message</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#The-Perplexing-Discrepancy"><span class="post-toc-number">2.</span> <span class="post-toc-text">The Perplexing Discrepancy</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#The-Unyielding-File-Handles"><span class="post-toc-number">3.</span> <span class="post-toc-text">The Unyielding File Handles</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#The-Pursuit-of-Resolution"><span class="post-toc-number">4.</span> <span class="post-toc-text">The Pursuit of Resolution</span></a></li></ol></nav></aside><article id="post-posts/server-debug-df-du" class="post-article article-type-post fade" itemprop="blogPost"><div class="post-card"><h1 class="post-card-title">Case Study: Resolving the Mystery of a Full Linux Root Disk</h1><div class="post-meta"> <time class="post-time" title="2021-09-04 00:47:40" datetime="2021-09-04T00:47:40.000Z" itemprop="datePublished">2021-09-04</time><ul class="article-category-list" itemprop="keywords"><li class="article-category-list-item"><a class="article-category-list-link" href="/tags/debug/" rel="tag">debug</a></li><li class="article-category-list-item"><a class="article-category-list-link" href="/tags/technical-docs/" rel="tag">technical_docs</a></li></ul><span id="busuanzi_container_page_pv" title="Views" style="display:none"><i class="icon fa-solid fa-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span></span></div><div class="post-content" id="post-content" itemprop="postContent"><p>In the world of genomics research, every data point carries the potential to unlock the secrets of life itself. However, as genomics datasets grow in size and complexity, so do the challenges of managing the associated disk space. This is a story of a recent journey that began with a simple task: using the Integrative Genomics Viewer (IGV) to inspect many signal tracks. Little did I know that this journey would lead to a deep dive into the enigmatic realm of Linux file handles and the secrets they held.</p><h2 id="The-Enigmatic-Message"><a href="#The-Enigmatic-Message" class="headerlink" title="The Enigmatic Message"></a>The Enigmatic Message</h2><p>The story unfolds in the midst of my genomics analysis. I was inspecting numerous signal tracks with IGV. My workflow consisted of working in batched samples—inspect, analyze, delete. As I diligently removed the tracks from IGV and deleted the corresponding files from the filesystem, all seemed well. That was until an unexpected message disrupted my rhythm: “Root disk full.”</p> <img src="/posts/case-study-resolving-the-mystery-of-a-full-linux-root-disk/disk-space-low.png" class="" title="Low disk space on root"><h2 id="The-Perplexing-Discrepancy"><a href="#The-Perplexing-Discrepancy" class="headerlink" title="The Perplexing Discrepancy"></a>The Perplexing Discrepancy</h2><p>The message left me bewildered. How could the root disk be full when I had meticulously deleted the files associated with the inspected signal tracks? I first checked the situation with the <code>df</code> command and confirmed that the system still believed it was running out of space.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h </span><br></pre></td></tr></table></figure><blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Filesystem        Size  Used Avail Use% Mounted on</span><br><span class="line">tmpfs             50G  3.0M   50G   1% /run</span><br><span class="line">/dev/sda1         58G   58G  455M 100% /</span><br><span class="line">...</span><br></pre></td></tr></table></figure></blockquote><p>Determined to solve this mystery, I turned to the <code>du</code> command, the venerable tool for disk usage analysis. Yet, to my astonishment, <code>du</code> reported a different story. It indicated that the disk had ample space, with only 24G being used.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo du -h --max-depth=1 /</span><br></pre></td></tr></table></figure><blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">8.3G	/usr</span><br><span class="line">5.4G	/home</span><br><span class="line">7.1M	/tmp</span><br><span class="line">4.9G	/snap</span><br><span class="line">5.1G	/var</span><br><span class="line">...</span><br><span class="line">24G	.</span><br></pre></td></tr></table></figure></blockquote><h2 id="The-Unyielding-File-Handles"><a href="#The-Unyielding-File-Handles" class="headerlink" title="The Unyielding File Handles"></a>The Unyielding File Handles</h2><p>The perplexing discrepancy between the reported disk usage and the <code>du</code> output left me scratching my head. What could possibly be holding onto that disk space? I couldn’t help but wonder if I had missed something when running the <code>du</code> command. But no, I had executed the command on the entire root directory with all the privileges of an admin. So, what other mysterious forces could be at play?</p><p>A crucial revelation came to light as I delved deeper into the mystery. There may be files that were still open despite being deleted. The question now was: how do I unearth these orphaned files and identify the processes holding them hostage?</p><p>To answer this question, I turned to the ‘lsof’ command. Specifically, I used the following command to search for orphaned files and the processes that kept them open:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof +aL1 /</span><br></pre></td></tr></table></figure><p>The output was illuminating. A single Java process, with ID <code>455114</code>, was responsible for holding onto all the orphaned files, each contributing to the discrepancy in disk space usage. This was evident from the <code>SIZE/OFF</code> column, which displayed substantial figures.</p><blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">COMMAND       PID    USER   FD   TYPE DEVICE   SIZE/OFF NLINK    NODE NAME</span><br><span class="line">java       455114      li  118r   REG    8,1  624602003     0 1552486 /home/li/.local/share/Trash/expunged/751520316 (deleted)</span><br><span class="line">java       455114      li  119r   REG    8,1 1180123471     0 1552300 /home/li/.local/share/Trash/expunged/2560126835 (deleted)</span><br><span class="line">java       455114      li  129r   REG    8,1  225277230     0 1578319 /home/li/.local/share/Trash/expunged/2423833192 (deleted)</span><br><span class="line">...</span><br><span class="line">java       455114      li  221r   REG    8,1 2846628790     0 1582420 /home/li/.local/share/Trash/expunged/2658608637 (deleted)</span><br></pre></td></tr></table></figure></blockquote><h2 id="The-Pursuit-of-Resolution"><a href="#The-Pursuit-of-Resolution" class="headerlink" title="The Pursuit of Resolution"></a>The Pursuit of Resolution</h2><p>Armed with this newfound knowledge, I was determined to catch the ghost occupying my disk space. The first step in this quest was to identify the program behind those tenacious file handles. I began my search by unmasking the process responsible for these file handles. To do this, I used the <code>ps aux</code> command with <code>grep</code> to filter the results based on the process ID (455114) I discovered earlier. The command looked like this:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep 455114</span><br></pre></td></tr></table></figure><p>The result was a revealing snapshot of the process:</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">li   455114  0.3  0.4 22382052 2385040 pts/6 Sl+ Aug30  20:32 java -showversion --module-path=/home/li/IGV_Linux_2.16.2/lib -Xmx8g @/home/li/IGV_Linux_2.16.2/igv.args -Dapple.laf.useScreenMenuBar=true -Djava.net.preferIPv4Stack=true -Djava.net.useSystemProxies=true @/home/li/.igv/java_arguments --module=org.igv/org.broad.igv.ui.Main</span><br></pre></td></tr></table></figure></blockquote><p>Ah, the culprit was none other than IGV itself! Despite removing the tracks from IGV and deleting the corresponding files from the filesystem, IGV had clung onto the file handles, refusing to release them. The pieces of the puzzle were finally coming together, and a solution was now within reach.</p><p>Right after I terminated the IGV instance, a lot of disk space got released, and the problem was solved!</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br></pre></td></tr></table></figure><blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Filesystem        Size  Used Avail Use% Mounted on</span><br><span class="line">tmpfs             50G  3.0M   50G   1% /run</span><br><span class="line">/dev/sda1         58G   18G   41G  31% /</span><br><span class="line">...</span><br></pre></td></tr></table></figure></blockquote></div><blockquote class="post-copyright"><div class="content"><div> <span class="post-time">Last updated: <time datetime="2025-04-23T04:03:22.946Z" itemprop="dateUpdated">2025-04-23 04:03:22</time></span><br></div><div>This article is posted in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</div><div>Permanent link to this post: <a href="https://www.yaobio.com/posts/case-study-resolving-the-mystery-of-a-full-linux-root-disk/">https://www.yaobio.com/posts/case-study-resolving-the-mystery-of-a-full-linux-root-disk/</a></div></div><footer> <a href="https://www.yaobio.com"><img src="/img/profile.png" alt="Li Yao"> Li Yao</a></footer></blockquote><div class="post-footer"></div></div><nav class="post-nav flex-row flex-justify-between flex-row-reverse"><div class="waves-block waves-effect next"><a href="/posts/mastering-igv-tips-and-tricks-for-visualizing-sequencing-data/" id="post-next" class="post-nav-link"><div class="tips">Next<i class="icon fa-solid fa-angle-right fa-lg icon-pl"></i></div><h4 class="title">Mastering IGV: Tips and Tricks for Visualizing Sequencing Data</h4></a></div></nav><section class="comments" id="comments"><div id="disqus_thread"></div><script>var disqus_shortname="yaobio";lazyScripts.push("//"+disqus_shortname+".disqus.com/embed.js")</script><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></section></article></div><footer class="footer"><div class="top"><p> <span>This page is available under the <a rel="license noopener" target="_blank" href="//creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</span></p></div><div class="bottom"><p><span>Li Yao &copy; 2019 - 2025</span> <span>Modified from indigo.</span></p></div></footer></main><div class="mask" id="mask"></div><a href="javascript:;" rel="external nofollow noreferrer" id="gotop" class="waves-effect waves-circle waves-light"><span class="fa-solid fa-lg fa-chevron-up"></span></a><script src="/js/waves.min.js?v=2.0.0"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>var BLOG={ROOT:"/",SHARE:!1,REWARD:!1}</script><script src="/js/main.js"></script><div class="search-panel" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item"><a href="{path}" class="waves-block waves-effect"><div class="title ellipsis" title="{title}">{title}</div><div class="flex-row flex-middle"><div class="tags ellipsis"> {tags}</div> <time class="flex-col time">{date}</time></div></a></li></template><script src="/js/search.min.js?v=2.0.0" async></script></body></html>