<!DOCTYPE html><html><head><meta charset="utf-8"><title>Setting up a handy research environment on Linux servers | Li Yao</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#3F51B5"><meta name="keywords" content="technical_docs,orientation"><meta name="description" content="Login with SSH keyPutting your password every time you log into a server via SSH can be tiresome, especially if your password is long. One way to make life easier and safer is by using SSH keys.  In t"><meta property="og:type" content="article"><meta property="og:title" content="Setting up a handy research environment on Linux servers"><meta property="og:url" content="https://www.yaobio.com/posts/setting-up-a-handy-research-environment-on-linux-servers/index.html"><meta property="og:site_name" content="Li Yao"><meta property="og:description" content="Login with SSH keyPutting your password every time you log into a server via SSH can be tiresome, especially if your password is long. One way to make life easier and safer is by using SSH keys.  In t"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://www.yaobio.com/posts/setting-up-a-handy-research-environment-on-linux-servers/jupyter_default_output.png"><meta property="og:image" content="https://www.yaobio.com/posts/setting-up-a-handy-research-environment-on-linux-servers/jupyter_high_resolution_output.png"><meta property="article:published_time" content="2020-07-20T09:31:47.000Z"><meta property="article:modified_time" content="2025-04-23T04:03:22.942Z"><meta property="article:author" content="Li Yao"><meta property="article:tag" content="technical_docs"><meta property="article:tag" content="orientation"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.yaobio.com/posts/setting-up-a-handy-research-environment-on-linux-servers/jupyter_default_output.png"><link rel="alternate" type="application/atom+xml" title="Li Yao" href="/atom.xml"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css?v=2.0.0"><link rel="stylesheet" href="/css/li.css?v=2.0.0"><script>window.lazyScripts=[]</script><script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-KGJ9HPC",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><meta name="generator" content="Hexo 6.2.0"></head><body><script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-KGJ9HPC",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><div id="loading" class="active"></div><aside id="menu" class="hide"><div class="inner flex-row-vertical"><a href="javascript:;" rel="external nofollow noreferrer" class="header-icon waves-effect waves-circle waves-light" id="menu-off"><i class="fa-solid fa-lg fa-xmark"></i></a><div class="brand-wrap" style="background-image:url(/img/brand.jpg)"><div class="brand"> <a href="/" class="avatar waves-effect waves-circle waves-light"><img src="/img/profile.png"></a><hgroup class="introduce"><h5 class="nickname"> Li Yao</h5></hgroup></div></div><div class="scroll-wrap flex-col"><ul class="nav"><li class="waves-block waves-effect"><a href="/"><i class="icon fa-solid fa-lg fa-house-chimney"></i> Home</a></li><li class="waves-block waves-effect"><a href="/publications"><i class="icon fa-solid fa-lg fa-book"></i> Publications</a></li><li class="waves-block waves-effect"><a href="/tools"><i class="icon fa-solid fa-lg fa-rocket"></i> Tools</a></li><li class="waves-block waves-effect"><a href="/teaching"><i class="icon fa-solid fa-lg fa-person-chalkboard"></i> Teaching</a></li></ul></div></div></aside><main id="main"><div class="uni-header"><header class="top-header" id="header"><div class="flex-row"><a href="javascript:;" rel="external nofollow noreferrer" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="fa-solid fa-lg fa-bars"></i></a><div class="flex-col header-title ellipsis">Setting up a handy research environment on Linux servers</div><div class="search-wrap" id="search-wrap"><a href="javascript:;" rel="external nofollow noreferrer" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="fa-solid fa-lg fa-chevron-left"></i></a> <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search"><a href="javascript:;" rel="external nofollow noreferrer" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="fa-solid fa-lg fa-magnifying-glass"></i></a></div></div></header><header class="content-header post-header"><div class="container fade-scale"><h1 class="title">Setting up a handy research environment on Linux servers</h1><h5 class="subtitle"> <time datetime="2020-07-20T09:31:47.000Z" itemprop="datePublished" class="page-time">2020-07-20</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/posts/">posts</a></li></ul></h5></div></header></div><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap post-toc-shrink" id="post-toc"><h4>Table of Content</h4><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Login-with-SSH-key"><span class="post-toc-number">1.</span> <span class="post-toc-text">Login with SSH key</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Avoid-file-descriptor-exhaustion"><span class="post-toc-number">2.</span> <span class="post-toc-text">Avoid file descriptor exhaustion</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Change-the-default-plotting-settings-for-Matplotlib-and-Jupyter"><span class="post-toc-number">3.</span> <span class="post-toc-text">Change the default plotting settings for Matplotlib and Jupyter</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Change-default-font-styles-in-Matplotlib"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">Change default font styles in Matplotlib</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Make-figures-in-Notebook-more-clear"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">Make figures in Notebook more clear</span></a></li></ol></li></ol></nav></aside><article id="post-posts/2020-07-20-Setup-Linux-Server" class="post-article article-type-post fade" itemprop="blogPost"><div class="post-card"><h1 class="post-card-title">Setting up a handy research environment on Linux servers</h1><div class="post-meta"> <time class="post-time" title="2020-07-20 09:31:47" datetime="2020-07-20T09:31:47.000Z" itemprop="datePublished">2020-07-20</time><ul class="article-category-list" itemprop="keywords"><li class="article-category-list-item"><a class="article-category-list-link" href="/tags/orientation/" rel="tag">orientation</a></li><li class="article-category-list-item"><a class="article-category-list-link" href="/tags/technical-docs/" rel="tag">technical_docs</a></li></ul><span id="busuanzi_container_page_pv" title="Views" style="display:none"><i class="icon fa-solid fa-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span></span></div><div class="post-content" id="post-content" itemprop="postContent"><h2 id="Login-with-SSH-key"><a href="#Login-with-SSH-key" class="headerlink" title="Login with SSH key"></a>Login with SSH key</h2><p>Putting your password every time you log into a server via SSH can be tiresome, especially if your password is long. One way to make life easier and safer is by using SSH keys.</p><ol><li>In the terminal of your local machine, type in <code>ssh-keygen</code>. By default, the keys will be exported to <code>~/.ssh/id_rsa</code>; using the default is okay in most cases, but if you have multiple keys and want to avoid conflicts, you can change the destination.</li><li>When it prompts you to enter a passphrase, you can click Enter (empty passphrase) so that you don’t need to input anything when you log in to a server using this key pair. But for better security, a passphrase is suggested.</li><li>Copy your SSH public key into the server by <code>ssh-copy-id -i ~/.ssh/id_rsa.pub user_name@server_address</code> (change the path to the public key if you’ve saved it somewhere else). You’ll be prompted to enter <strong>your password at the server</strong>.</li><li>Log in to the server by <code>ssh user_name@server_address</code>. You should be able to log in without having to enter your password! If it doesn’t work, check the permission of the <code>~/.ssh</code> folder on your server. Only you should have write access to it. You can change its permission from your home folder by <code>chmod 700 .ssh</code>.</li></ol><h2 id="Avoid-file-descriptor-exhaustion"><a href="#Avoid-file-descriptor-exhaustion" class="headerlink" title="Avoid file descriptor exhaustion"></a>Avoid file descriptor exhaustion</h2><p>Running pipelines requires handle large numbers of concurrent connections require the ability to open many files (sockets, log files, etc.). The default ulimit values (especially for file descriptors) are often too low for research servers. Without adjusting these limits, File descriptor exhaustion can occur, resulting in errors like “Too many open files.”</p><p>Check the max allowed number of open files by</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ulimit -n</span><br></pre></td></tr></table></figure><p>Set it to a larger number:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ulimit -n 100000</span><br></pre></td></tr></table></figure><p>Or add the following line to <code>/etc/security/limits.conf</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*  -   nofile   100000</span><br></pre></td></tr></table></figure><h2 id="Change-the-default-plotting-settings-for-Matplotlib-and-Jupyter"><a href="#Change-the-default-plotting-settings-for-Matplotlib-and-Jupyter" class="headerlink" title="Change the default plotting settings for Matplotlib and Jupyter"></a>Change the default plotting settings for Matplotlib and Jupyter</h2><p>Many people explore and analyze data with the powerful combination of Matplotlib (along with Seaborn) and Jupyter Notebook&#x2F;Lab. This widely favored choice provides a flexible environment for data visualization. However, it’s important to note that the default settings of these tools may not always meet field-specific requirements. To address this, I have compiled a list of modifications that I personally introduced to the configuration files of Jupyter and Matplotlib. These changes allow for customization and tailoring of their default behaviors to suit individual needs better.</p><h3 id="Change-default-font-styles-in-Matplotlib"><a href="#Change-default-font-styles-in-Matplotlib" class="headerlink" title="Change default font styles in Matplotlib"></a>Change default font styles in Matplotlib</h3><p>Scientific publishers often have customized guidelines for figure fonts to ensure optimal print readability. They may specify requirements such as setting the typeface as Arial or Helvetica, with a minimum font size of 5 pt and a maximum size of 7 pt. Unfortunately, the default font styling in Matplotlib&#x2F;Seaborn is optimized for screen reading. As a result, many researchers manually adjust the font sizes of their generated figures in image editing software like Illustrator or Affinity Designer. This tedious process can be time-consuming and prone to error. By making necessary modifications to the configuration files of Jupyter and Matplotlib, we can ensure that our plots are in a publication-ready state from the very beginning, saving valuable time and effort. Here, I will show you how to change the default font size for matplotlib:</p><ol><li>Locate the configuration file for matplotlib by running the following code in a Python session:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="built_in">print</span>(matplotlib.matplotlib_fname())</span><br></pre></td></tr></table></figure></li><li>Open the configuration file, locate the default settings that you want to override.</li></ol><ul><li><code>figure.titlesize</code>: Font size of the figure title</li><li><code>axes.labelsize</code>: Font size for $x$ and $y$ labels</li><li><code>xtick.labelsize</code> and <code>ytick.labelsize</code>: Font size for the $x$ or $y$ ticks</li><li><code>legend.title_fontsize</code>: Font size for the title of the legend</li><li><code>legend.fontsize</code>: Font size for legends</li></ul><ol start="3"><li>If there’s a <code>#</code> right before the option, it means this option is commented and will not be considered by matplotlib. So to make it effective, remove the <code>#</code> first, then change the values to the ones you desired.</li><li>Save the file, and go create new figures.</li></ol><p>Here is the actual settings that I usually use:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">font.sans-serif: Arial, Helvetica, DejaVu Sans, Bitstream Vera Sans, Computer Modern Sans Serif, Lucida Grande, Verdana, Geneva, Lucid, Avant Garde, sans-serif</span><br><span class="line">font.size:             5     # default text sizes</span><br><span class="line">figure.titlesize:      7     # size of the figure title (``Figure.suptitle()``)</span><br><span class="line">figure.labelsize:      7     # size of the figure label (``Figure.sup[x|y]label()``)</span><br><span class="line">axes.titlesize:        7     # font size of the axes title</span><br><span class="line">axes.labelsize:        7     # font size of the x and y labels</span><br><span class="line">xtick.labelsize:       6     # font size of the x tick labels</span><br><span class="line">ytick.labelsize:       6     # font size of the y tick labels</span><br><span class="line">legend.title_fontsize: 7     # font size of legend tile</span><br><span class="line">legend.fontsize:       6     # font size of other text in the legend</span><br></pre></td></tr></table></figure><p>If you are looking for a one-time change, you can override these values in <code>RcParams</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plt.rc(<span class="string">&#x27;font&#x27;</span>, size=<span class="number">5</span>)          <span class="comment"># controls default text sizes</span></span><br><span class="line">plt.rc(<span class="string">&#x27;axes&#x27;</span>, titlesize=<span class="number">7</span>)     <span class="comment"># fontsize of the axes title</span></span><br><span class="line">plt.rc(<span class="string">&#x27;axes&#x27;</span>, labelsize=<span class="number">7</span>)     <span class="comment"># fontsize of the x and y labels</span></span><br><span class="line">plt.rc(<span class="string">&#x27;xtick&#x27;</span>, labelsize=<span class="number">6</span>)    <span class="comment"># fontsize of the tick labels</span></span><br><span class="line">plt.rc(<span class="string">&#x27;ytick&#x27;</span>, labelsize=<span class="number">6</span>)    <span class="comment"># fontsize of the tick labels</span></span><br><span class="line">plt.rc(<span class="string">&#x27;legend&#x27;</span>, fontsize=<span class="number">6</span>)    <span class="comment"># legend fontsize</span></span><br><span class="line">plt.rc(<span class="string">&#x27;figure&#x27;</span>, titlesize=<span class="number">7</span>)   <span class="comment"># fontsize of the figure title</span></span><br></pre></td></tr></table></figure><blockquote><p>Note: if you set the font sizes to 5~7 pts, you may also need to scale down the figure size. The default figure size is $6.4\times4.8 $ inches, I usually set the default as:</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">figure.figsize:     3.2, 2.4  # figure size in inches</span><br></pre></td></tr></table></figure><h3 id="Make-figures-in-Notebook-more-clear"><a href="#Make-figures-in-Notebook-more-clear" class="headerlink" title="Make figures in Notebook more clear"></a>Make figures in Notebook more clear</h3><p>For high-definition screen users, especially for people who are using Macbook and iMac, the inline figures shown up in Jupyter Notebook&#x2F; Lab can be very blurry, like the this one:</p> <img src="/posts/setting-up-a-handy-research-environment-on-linux-servers/jupyter_default_output.png" class="" title="A blurry image generated with the default settings."><p>To solve this problem, you can execute the following command <strong>in the notebook</strong> that you want to get high-resolution figures:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%config InlineBackend.figure_format=<span class="string">&#x27;retina&#x27;</span></span><br></pre></td></tr></table></figure><p>Now output figures will be much more clear:</p> <img src="/posts/setting-up-a-handy-research-environment-on-linux-servers/jupyter_high_resolution_output.png" class="" title="A high-resolution image generated with the modified settings."><p>The major drawback for the above method is that you have to execute it every time you create a new Notebook. If you want Notebooks to produce high-def figures by default, you’ll need to modify the configuration files for IPython (which Notebooks use it to run actual codes):</p><ol><li>Check if you’ve already had a configuration (<code>ipython_kernel_config.py</code>) for IPython created before. For Linux and MacOS users, the file is usually located at <code>~/.ipython/profile_default</code>, if you don’t know where it locates, you can use <code>ipython locate</code> to figure it out; if the file is not in this destination, you can run <code>ipython profile create</code> to create it.</li><li>Add <code>c.InlineBackend.figure_formats = [&quot;retina&quot;]</code> or <code>c.InlineBackend.figure_formats = [&quot;svg&quot;]</code> to the end of this file (<code>ipython_kernel_config.py</code>).</li><li>Kill your Jupyter Notebook &#x2F; Lab, and rerun it.</li></ol></div><blockquote class="post-copyright"><div class="content"><div> <span class="post-time">Last updated: <time datetime="2025-04-23T04:03:22.942Z" itemprop="dateUpdated">2025-04-23 04:03:22</time></span><br></div><div>This article is posted in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</div><div>Permanent link to this post: <a href="https://www.yaobio.com/posts/setting-up-a-handy-research-environment-on-linux-servers/">https://www.yaobio.com/posts/setting-up-a-handy-research-environment-on-linux-servers/</a></div></div><footer> <a href="https://www.yaobio.com"><img src="/img/profile.png" alt="Li Yao"> Li Yao</a></footer></blockquote><div class="post-footer"></div></div><nav class="post-nav flex-row flex-justify-between"><div class="waves-block waves-effect prev"><a href="/posts/mastering-igv-tips-and-tricks-for-visualizing-sequencing-data/" id="post-prev" class="post-nav-link"><div class="tips"><i class="icon fa-solid fa-angle-left fa-lg icon-pr"></i> Prev</div><h4 class="title">Mastering IGV: Tips and Tricks for Visualizing Sequencing Data</h4></a></div><div class="waves-block waves-effect next"><a href="/posts/securing-jupyter-notebooks-by-tracing-modification-histories/" id="post-next" class="post-nav-link"><div class="tips">Next<i class="icon fa-solid fa-angle-right fa-lg icon-pl"></i></div><h4 class="title">Securing Jupyter Notebooks by tracing modification histories</h4></a></div></nav><section class="comments" id="comments"><div id="disqus_thread"></div><script>var disqus_shortname="yaobio";lazyScripts.push("//"+disqus_shortname+".disqus.com/embed.js")</script><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></section></article></div><footer class="footer"><div class="top"><p> <span>This page is available under the <a rel="license noopener" target="_blank" href="//creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</span></p></div><div class="bottom"><p><span>Li Yao &copy; 2019 - 2025</span> <span>Modified from indigo.</span></p></div></footer></main><div class="mask" id="mask"></div><a href="javascript:;" rel="external nofollow noreferrer" id="gotop" class="waves-effect waves-circle waves-light"><span class="fa-solid fa-lg fa-chevron-up"></span></a><script src="/js/waves.min.js?v=2.0.0"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>var BLOG={ROOT:"/",SHARE:!1,REWARD:!1}</script><script src="/js/main.js"></script><div class="search-panel" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item"><a href="{path}" class="waves-block waves-effect"><div class="title ellipsis" title="{title}">{title}</div><div class="flex-row flex-middle"><div class="tags ellipsis"> {tags}</div> <time class="flex-col time">{date}</time></div></a></li></template><script src="/js/search.min.js?v=2.0.0" async></script></body></html>